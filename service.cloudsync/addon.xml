<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<addon id="service.cloudsync" name="CloudSync" version="3.3.7" provider-name="CloudSync">
  <requires>
    <import addon="xbmc.python" version="3.0.0"/>
  </requires>
  <extension point="xbmc.service" library="service.py" start="startup" />
  <extension point="xbmc.addon.metadata">
    <summary>CloudSync - Real-time MQTT Sync</summary>
    <description>CloudSync V3 delivers robust synchronization of watched status, resume points, and favorites across multiple Kodi devices using advanced MQTT messaging with full offline support. Features persistent sessions, message retention, automatic reconnect sync, and zero-conflict add-only favorites. Includes manual favorites master publishing for complete device synchronization. Messages persist up to 30 days for offline devices.</description>
    <platform>all</platform>
    <language>en</language>
    <license>MIT</license>
    <forum>https://github.com/fifthy52/kodi-cloudsync/discussions</forum>
    <website>https://github.com/fifthy52/kodi-cloudsync</website>
    <source>https://github.com/fifthy52/kodi-cloudsync</source>
    <news>
v3.3.7 - Final Session Conflict Resolution
- FIXED: Eliminated "Session taken over" infinite reconnection loops completely
- Changed to clean sessions with unique timestamped client IDs for maximum stability
- MQTT retained messages handle offline sync automatically without persistent sessions
- Production-stable MQTT 5.0 implementation with zero session conflicts
v3.3.5 - Instance Protection Fix
- Fixed critical lock file logic preventing multiple service instances
- Corrected Windows file existence check order
- Should eliminate "Session taken over" infinite reconnection loops
v3.3.4 - Python Syntax Fix
- Fixed critical syntax error preventing service startup
- Corrected fcntl import handling for cross-platform compatibility
v3.3.3 - Comprehensive MQTT 5.0 Connection Stability
- Fixed "Session taken over" infinite reconnection loops with unique client IDs
- Resolved "Failed to publish, result code: 4" errors with connection state checks
- Added Session Expiry Interval (24h) for proper offline device handling
- Implemented service instance protection to prevent multiple running instances
- Optimized publish timing to prevent race conditions during connection setup
v3.3.2 - MQTT 5.0 Callback Signature Fix
- Fixed callback signature mismatch causing connection errors after successful login
- Updated on_connect and on_disconnect callbacks for MQTT 5.0 properties parameter
- Resolves "_on_connect() takes 5 positional arguments but 6 were given" error
v3.3.1 - MQTT 5.0 Compatibility Fix
- Fixed "Clean session is not used for MQTT 5.0" connection error
- Use clean_start instead of clean_session for MQTT 5.0 compatibility
- Maintains full offline support functionality
v3.3.0 - Full Offline Support with MQTT 5.0
- Advanced MQTT messaging with persistent sessions and message retention
- QoS 1 delivery guarantee for critical watched/resume data (30-day expiry)
- Automatic sync on reconnect - no manual intervention needed
- Manual favorites master publishing for complete device synchronization
- Simplified sync architecture leveraging MQTT broker capabilities
v3.2.2 - Clean Settings Interface
- Removed duplicate Device Name field
- Removed unused connection timeout settings
- Cleaner, simplified settings interface
v3.2.1 - Automatic Web Server Restart
- Web server now starts/stops automatically when settings change
- No need to restart addon when enabling web configuration
v3.2.0 - Web Configuration Interface
- Added browser-based MQTT configuration server
- Easy setup without TV remote input for broker settings
- Configurable web server port (default 8090)
v3.1.0 - Production-ready release with optimized logging
- Cleaned up verbose debug logs for better readability
- Unified V3 branding across all components
- Fixed device ID consistency issues
v3.0.0 - Add-only favorites sync with anti-loop protection
- Prevents sync wars between devices
- 10-second anti-loop grace period
    </news>
  </extension>
</addon>